# Amazon Quicksight

## What is it
* fast, easy, cloud-powered business analytics service
* made not for developers, but for business analysts
* allows to:
  * build visualizations
  * perform ad-hoc analysis
  * get business insights from data
  * support any devices
* serverless

## Data sources
* redshift/redshift spectrum
* aurora/rds
* athena
* EC2-hosted databases (via ODBC/JDBC)
* on-premise databases
* files (S3 or on-premises): Excel, CSVs etc
* data preparation allows limited ETL (change field names, add calculated files, change data types etc)
* software as a service (Jira, Github, Salesforce, Twitter)

## SPICE
SPICE = Super-fast, Parallel, In-memory Calculation Engine

* It's a way of copy data from Athena into a more optimized format required by Quicksight
* in practice, it's copies data from sources to quicksight, every user gets 10 gigabytes of storage for SPICE data.
* can accelerate large queries that would timeout in direct query mode
* behaves similar to local cache. It means that it prevents from querying datasource many times, instead of this quicksight checks if data is already stored in SPICE

## Use cases
* interactive ad-hoc exploration
* dashboards and KPI's

## Anti-patterns
* highly formatted canned reports (Quicksight is rather for ad-hoc analysis...)
* ETL - use Glue instead

## Security
* VPC connectivity - to allow for network communication with source databases you can add quicksight's IP address range to your database security groups
* Row-level security
* private VPC access
* access to S3 or Athena resources for Quicksight in general are managed directly from Quicksight console (Manage Quicksight / Security & Permissions)
* access for specific user can be restricted using IAM policies in which we can state that selected user has no access to specific S3 bucket or athena object

## Quicksight vs AWS Regions
* by default, Quicksight can only access data stored **in the same region* as the one Quicksight is running within
* VPC configured to work across AWS regions won't work
* you need to create a new security group with an inbound rule authorizing access from the IP range of Quicksight servers in that region

## Data encryption
* All metadata and data in SPICE is encrypted with AWS-managed keys (only in Enterprise version)
* Encryption in transit supported in both versions (ssl, https)

## User Management
* viewers = limited access, viewing, filtering and sorting
* owners = develppers/engineer, create dashboards

## Pricing model
* there are **two version of quicksight** - Standard and Enterprise
* enterprise allows for:
  * encryption at rest (for results of queries and SPICE)
  * MS Active Directory integration
* costs are based on number of user:
  * standard - 108$/year or 12$/month
  * enterprise - 216$/year or 24$/month
* there are option for buying extra SPICE capacity (beyond 10GB) - for standard 0.25$/user/GB, for enterprise - 0.38$/user/GB
* above prices are for authors - people who do dashboards and ad-hoc analysis

## Machine Learning Insights
quicksight offer builtin machine learning models:
* anomaly detection (uses Random Cut Forest)
* forecasting (detects seasonality also by using Random Cut Forest)
* autonarratives (adds "story of your data" to dashboards, description of key measures generated by machine learning models)
* suggested insights

## Quicksight Q
* machine learning powered
* answers business questions with Natural Language Processing
* needs a lot of communication, personal training, preprocessing data to be NLP-friendly

## Visual Types
* autograph - automatically suggests what type of visual should be used
* bar charts - for comparison and histograms
* line graphs - for changes over time
* scatter plots, heat maps - for correlation
* pie graphs, tree maps - for aggregation
* pivot tables - for tabular data
* KPI
* Geospatial (maps)
* donut
* gauge - compare value in a measure (execution of target)
* word clouds