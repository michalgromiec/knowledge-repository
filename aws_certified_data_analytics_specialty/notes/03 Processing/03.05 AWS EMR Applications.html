
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apache Spark &#8212; Knowledge Repository 0.1 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    <no title>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Kinesis Data Streams
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00%20Certification/00%20cerfification%20info.html">
   DAS-C01 certification info
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01%20Collection%20of%20data/01.02%20Kinesis%20Data%20Streams.html">
   Kinesis Data Streams
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01%20Collection%20of%20data/01.04%20Kinesis%20Data%20Streams%20-%20consumers.html">
   Consumers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01%20Collection%20of%20data/01.05%20Kinesis%20Data%20Streams%20Scaling.html">
   Scaling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01%20Collection%20of%20data/01.06%20Kinesis%20Data%20Streams%20-%20handling%20duplicates.html">
   Handling duplicates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01%20Collection%20of%20data/01.07%20Kinesis%20Data%20Streams%20Security.html">
   Security
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01%20Collection%20of%20data/02.01%20Kinesis%20Data%20Firehose.html">
   Kinesis Data Firehose
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/michalgromiec/knowledge-repository"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/michalgromiec/knowledge-repository/edit/master/docs/source/aws_certified_data_analytics_specialty/notes/03 Processing/03.05 AWS EMR Applications.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Apache Spark
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#architecture">
     Architecture
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#components">
     Components
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#integrations">
     Integrations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#apache-hive">
   Apache Hive
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hive-metastore">
     Hive Metastore
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pig">
   Pig
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hbase">
   HBase
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#presto">
   Presto
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zepellin">
   Zepellin
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#emr-notebooks">
   EMR Notebooks
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hue">
   Hue
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#splunk">
   Splunk
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flume">
   Flume
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mxnet">
   MXNet
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Apache Spark</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Apache Spark
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#architecture">
     Architecture
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#components">
     Components
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#integrations">
     Integrations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#apache-hive">
   Apache Hive
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hive-metastore">
     Hive Metastore
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pig">
   Pig
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hbase">
   HBase
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#presto">
   Presto
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zepellin">
   Zepellin
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#emr-notebooks">
   EMR Notebooks
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hue">
   Hue
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#splunk">
   Splunk
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flume">
   Flume
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mxnet">
   MXNet
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="apache-spark">
<h1>Apache Spark<a class="headerlink" href="#apache-spark" title="Permalink to this heading">#</a></h1>
<p>Open Source distributed framework used for big data workloads.</p>
<ul class="simple">
<li><p>kind of replacement for Map Reduce architecture - instead of Map Reduce which uses storage, Spark uses RAM memory (this is why it is faster)</p></li>
<li><p>contains predefined transformations, additional libraries (Spark MLlib, Spark Structure Streaming, Graph Processing etc) which help users in faster development of big data distributed applications</p></li>
<li><p>by using catalyst optimizer improves efficiency and is able to automate some processes which requires proper order of operations</p></li>
<li><p>programming languages supported: Java, Scala, Python and R</p></li>
<li><p>you can use it in interactive session and for batch processing or stream processing</p></li>
<li><p>Spark is not meant for OLTP (it doesnt support transactions, it has overhead on starting application etc.)</p></li>
</ul>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>driver node, Spark Context - coordinator, manages executor nodes by using YARN. All applications are send to this node</p></li>
<li><p>executor node - run computations and store data, receives command from driver node, executes them and send back results to driver</p></li>
</ul>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Spark Core - foundation of platform, responsible for memory management, scheduling, distribute&amp;monitor jobs, interact with storage, uses RDD for processing data</p></li>
<li><p>Spark SQL - best suitable for batch processing, distributed query engine, uses distriibuted DataFrames for processing data</p></li>
<li><p>Spark Structured Streaming - streaming analytics, support real time straming, users can use the same code as in spark sql, supports Kafka, Flume, HDFS</p></li>
<li><p>Spark MLLib - support machine learning algorithms</p></li>
<li><p>Graphx - graph processing</p></li>
</ul>
</div>
<div class="section" id="integrations">
<h2>Integrations<a class="headerlink" href="#integrations" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>S3 - can be source or target for Spark applications</p></li>
<li><p>Kinesis - you can read data from kinesis stream and do stream processing on this (e.g. compute number of records send to stream within one hour)</p></li>
<li><p>Redshift - you can both read and store data into Redshift (separate library containing Spark Redshift connector)</p></li>
</ul>
</div>
</div>
<div class="section" id="apache-hive">
<h1>Apache Hive<a class="headerlink" href="#apache-hive" title="Permalink to this heading">#</a></h1>
<p>distributed query engine allowing users to use sql on unstructured data. It uses mapreduce or tez (in-memory).</p>
<ul class="simple">
<li><p>uses HiveQL which is very similar to sql language</p></li>
<li><p>allows for interactive query (still not as fast os OLTP databases)</p></li>
<li><p>in some way, it replaces manually written map-reduce functions and allows user to simply use sql queries</p></li>
<li><p>it’s horizontally scalable like any other application sitting on EMR cluster (hadoop cluster)</p></li>
<li><p>high extensible (user defined functions, exposes data via jdbc and odbc driver)</p></li>
</ul>
<div class="section" id="hive-metastore">
<h2>Hive Metastore<a class="headerlink" href="#hive-metastore" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>schema metadata collection on which Hive executes queries</p></li>
<li><p>contains definition of fields and datatypes</p></li>
<li><p>by default, hive metastore is stored in mysql database on the master node</p></li>
<li><p>still can have external metastore - AWS Glue Data Catalog or store hive metastore in Amazon RDS (as it is AWS functionality for RDBS service, this way your hive metastore is persistent and doesn’t dissapear when cluster is terminated)</p></li>
<li><p>serves the same functionality as AWS Glue Data Catalog</p></li>
</ul>
</div>
</div>
<div class="section" id="pig">
<h1>Pig<a class="headerlink" href="#pig" title="Permalink to this heading">#</a></h1>
<p>introduces pig latin, scripting language let use sql-like syntax instead of writing mappers and reducers by hand.
Still, it’s not a SQL, it it a script language.</p>
<p>Mostly used for processing data.</p>
<p><img alt="img_4.png" src="../../../_images/img_41.png" /></p>
<p>Quite old technology, not popular nowadays.</p>
<p>Highly extensible with user-defined functions (UDFs)</p>
<p>It works on top of MapReduce or Tez.</p>
<p>It is not limited just to HDFS, it can query data in S3. Can load srcripts from S3.</p>
</div>
<div class="section" id="hbase">
<h1>HBase<a class="headerlink" href="#hbase" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>non-relational, petabyte-scale database.</p></li>
<li><p>based on Google BigTable, works on top of HDFS.</p></li>
<li><p>it operates mostly in-memory (this is the main reason why it’s so fast)</p></li>
<li><p>it’s similar to dynamodb</p>
<ul>
<li><p>both are nosql databases</p></li>
<li><p>but dynamodb is fully managed and have native integration with other AWS services</p></li>
<li><p>hbase is better for sparse data (columnal store?) and for high write&amp;update throughput</p></li>
</ul>
</li>
<li><p>integrates with S3 via EMRFS</p></li>
</ul>
</div>
<div class="section" id="presto">
<h1>Presto<a class="headerlink" href="#presto" title="Permalink to this heading">#</a></h1>
<p>connects to many different datasources and exposes them as one datasource (it can read data from hive and exposes it)</p>
<ul class="simple">
<li><p>unifies all data in one metastore</p></li>
<li><p>allows for interactive queries at petabyte scale</p></li>
<li><p>has familiar SQL syntax</p></li>
<li><p>optimized for OLAP applications</p></li>
<li><p>Amazon Athena uses Presto under the hood</p></li>
<li><p>exposes jdbc, command line and tableau interfaces</p></li>
<li><p>has own query optimizer (CBO)</p></li>
<li><p>in open-source world, it has renamed to Trino after facebook claimed ownership for Presto name</p></li>
<li><p>possible source of data:</p>
<ul>
<li><p>HDFS</p></li>
<li><p>S3</p></li>
<li><p>Cassandra</p></li>
<li><p>MongoDB</p></li>
<li><p>HBase</p></li>
<li><p>SQL</p></li>
<li><p>Redshift</p></li>
<li><p>Teradata</p></li>
</ul>
</li>
<li><p>it is even faster than Hive</p></li>
<li><p>all processing is done in-memory (but still not appropriate for OLTP)</p></li>
</ul>
</div>
<div class="section" id="zepellin">
<h1>Zepellin<a class="headerlink" href="#zepellin" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>requires hadoop/EMR cluster</p></li>
<li><p>similar to Jupyter Notebooks, but a little bit different</p></li>
<li><p>let interactively run scripts/code against data</p></li>
<li><p>share notebooks with others on cluster</p></li>
<li><p>can run Spark code interactively</p></li>
<li><p>can visualize query results in charts and graphs
<img alt="img_5.png" src="../../../_images/img_5.png" /></p></li>
</ul>
</div>
<div class="section" id="emr-notebooks">
<h1>EMR Notebooks<a class="headerlink" href="#emr-notebooks" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>similar to apache zeppelin</p></li>
<li><p>allow for provision cluters from the notebook</p></li>
<li><p>hosted inside a VPC</p></li>
<li><p>accessed only via AWS console</p></li>
<li><p>costs charged on EC2 instances launched under the hood, no additional charge for jupyter</p></li>
</ul>
</div>
<div class="section" id="hue">
<h1>Hue<a class="headerlink" href="#hue" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>HUE = Hadoop User Experience, frontend for entire cluster</p></li>
<li><p>open-source SQL assistant, self service data querying</p></li>
<li><p>integrates with IAM roles (secruity/authorization)</p></li>
<li><p>can browse &amp; move data between HFDS and S3</p></li>
</ul>
</div>
<div class="section" id="splunk">
<h1>Splunk<a class="headerlink" href="#splunk" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>visualize EMR and S3 data using EMR Hadoop cluster</p></li>
</ul>
</div>
<div class="section" id="flume">
<h1>Flume<a class="headerlink" href="#flume" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>streams data into cluster</p></li>
<li><p>made from the start with hadoop in mind</p></li>
<li><p>originally madde to handle log aggregation</p></li>
<li><p>has similar usage as kinesis (streaming log data into cluster)</p></li>
</ul>
</div>
<div class="section" id="mxnet">
<h1>MXNet<a class="headerlink" href="#mxnet" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>alternative to tensorflow, library for neural networks, included on EMR</p></li>
</ul>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By https://github.com/michalgromiec<br/>
  
      &copy; Copyright .<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>