
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kinesis Data Streams &#8212; Knowledge Repository 0.1 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Consumers" href="01.04%20Kinesis%20Data%20Streams%20-%20consumers.html" />
    <link rel="prev" title="DAS-C01 certification info" href="../00%20Certification/00%20cerfification%20info.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    <no title>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Kinesis Data Streams
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00%20Certification/00%20cerfification%20info.html">
   DAS-C01 certification info
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Kinesis Data Streams
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.04%20Kinesis%20Data%20Streams%20-%20consumers.html">
   Consumers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.05%20Kinesis%20Data%20Streams%20Scaling.html">
   Scaling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.06%20Kinesis%20Data%20Streams%20-%20handling%20duplicates.html">
   Handling duplicates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.07%20Kinesis%20Data%20Streams%20Security.html">
   Security
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02.01%20Kinesis%20Data%20Firehose.html">
   Kinesis Data Firehose
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/michalgromiec/knowledge-repository"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/michalgromiec/knowledge-repository/edit/master/docs/source/aws_certified_data_analytics_specialty/notes/01 Collection of data/01.02 Kinesis Data Streams.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#producers">
   Producers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#producer-types">
     Producer types
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aws-sdk">
       AWS SDK
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aws-kpl">
       AWS KPL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kinesis-agent">
       Kinesis Agent
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rd-party-applications-spark-flume-kafka-connect-nifi">
       3rd party applications (Spark, Flume, Kafka Connect, NiFi)
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hands-on">
     Hands-on
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aws-sdk-cli">
       AWS SDK (CLI)
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#stream-management">
         Stream Management
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#produce-records">
         Produce records
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#consumers">
   Consumers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties-characteristics">
   Properties/characteristics
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#capacity-modes">
   Capacity modes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#security">
   Security
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Kinesis Data Streams</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#producers">
   Producers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#producer-types">
     Producer types
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aws-sdk">
       AWS SDK
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aws-kpl">
       AWS KPL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kinesis-agent">
       Kinesis Agent
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rd-party-applications-spark-flume-kafka-connect-nifi">
       3rd party applications (Spark, Flume, Kafka Connect, NiFi)
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hands-on">
     Hands-on
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aws-sdk-cli">
       AWS SDK (CLI)
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#stream-management">
         Stream Management
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#produce-records">
         Produce records
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#consumers">
   Consumers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties-characteristics">
   Properties/characteristics
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#capacity-modes">
   Capacity modes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#security">
   Security
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="kinesis-data-streams">
<h1>Kinesis Data Streams<a class="headerlink" href="#kinesis-data-streams" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>required for processing stream data</p></li>
<li><p>able to scale horizontally</p></li>
<li><p>when creating data stream, number of shards has to be declared by creator.</p></li>
<li><p>By the number of shard you define consumption rate and ability to ingestion of big data (shards are used to split incoming data and create parallel processing)</p></li>
<li><p>Kinesis Data Streams is a proprietary product developed by AWS and is not based on open-source Apache Kafka</p></li>
</ul>
<div class="section" id="producers">
<h2>Producers<a class="headerlink" href="#producers" title="Permalink to this heading">#</a></h2>
<p>Used for gettting data into AWS Kinesis stream</p>
<ul class="simple">
<li><p>data are created by producers</p></li>
<li><p>producer can be an application, other client, AWS SDK command or Kinesis Agent</p></li>
<li><p>producer send <strong>record</strong> to Kinesis Stream</p></li>
<li><p><strong>record</strong> contain Partition Key and Data Blob (up to 1MB)</p></li>
<li><p>partition key define which shard record will be sent to</p></li>
<li><p>one shard can ingest 1MB of data per second or 1000 messages per second (AWS limit, see more https://docs.aws.amazon.com/streams/latest/dev/service-sizes-and-limits.html)</p></li>
</ul>
<div class="section" id="producer-types">
<h3>Producer types<a class="headerlink" href="#producer-types" title="Permalink to this heading">#</a></h3>
<div class="section" id="aws-sdk">
<h4>AWS SDK<a class="headerlink" href="#aws-sdk" title="Permalink to this heading">#</a></h4>
<p>you can use AWS CLI to send records to Kinesis Stream</p>
<ul class="simple">
<li><p>you can send record to stream using <code class="docutils literal notranslate"><span class="pre">put-record</span></code> (one record) or <code class="docutils literal notranslate"><span class="pre">put-records</span></code> (many records) cli command (see examples below)</p></li>
<li><p>PutRecords increase your throughput - it generates less HTTP requests</p></li>
<li><p>can be used on mobile app (Ios, android)</p></li>
<li><p>USE CASE: low throughput, higher latency accepted, simple API, Lambda</p></li>
<li><p>raises ProvisionedThroughputExceeded exemption when go over the limits</p>
<ul>
<li><p>kinesis simply rejects records exceeding limits, itself not repeat the put operation</p></li>
<li><p>can be solved by exponential backoff retry (i.e. after 2,4,8,16 seconds) or by increasing number of shards</p></li>
<li><p>make sure you don’t have hot shard (shard for which the most record partition keys are send)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="aws-kpl">
<h4>AWS KPL<a class="headerlink" href="#aws-kpl" title="Permalink to this heading">#</a></h4>
<p>Kinesis Producer Library, have more option than SDK and are able to solve advanced issues</p>
<ul class="simple">
<li><p>easy to implement C++/Java library (the most often Java is used)</p></li>
<li><p>USE CASE: high throughput, low latency, asynchronous, long running producers, but no in cases when you are focused on very low latency (due to default mini-batch functionality)</p></li>
<li><p>includes automated retry mechanism</p></li>
<li><p>both synchronous and asynchronous API are available - in opposition to AWS SDK when only synchronous is possible</p></li>
<li><p>by default, also submit metrics to cloudwatch, so you can monitor kinesis data stream</p></li>
<li><p>supports mini-batching, enabled by default, used to improve throughput and decrease costs</p>
<ul>
<li><p>collects records and send to Kinesis Stream in one record (executing on one PutRecords API call)</p></li>
<li><p>aggregate records to fill 1MB/sec limit, and then send them using one PutRecords API call</p></li>
<li><p>uses RecordMaxBufferedTime option, default 100ms, which states how long Kinesis has to wait to implement batching on produced records</p></li>
<li><p>by batching, latency is increased</p></li>
</ul>
</li>
<li><p>compression has to be still implemented by user - uncompression has to be implemented in consumer solution</p></li>
<li><p><strong>records handled by KPL can be consumed only by KCL</strong> (Kinesis Consumer Library) or special helper library</p></li>
</ul>
</div>
<div class="section" id="kinesis-agent">
<h4>Kinesis Agent<a class="headerlink" href="#kinesis-agent" title="Permalink to this heading">#</a></h4>
<p>linux tool which can be used on external linux server and i.e. send logs from this server</p>
<p>java-based agent, built on top of KPL. Monitors server logs and send new records to Kinesis Stream</p>
<ul class="simple">
<li><p>available only for linux servers</p></li>
<li><p>features:</p>
<ul>
<li><p>can write from multiple locations to multiple Kinesis Streams</p></li>
<li><p>can route based on directory/log file</p></li>
<li><p>can preprocess data before sending to streams (csv to json, json to csv etc)</p></li>
<li><p>handles file rotation, retry upon failures…</p></li>
<li><p>store own metrics in cloudwatch</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="rd-party-applications-spark-flume-kafka-connect-nifi">
<h4>3rd party applications (Spark, Flume, Kafka Connect, NiFi)<a class="headerlink" href="#rd-party-applications-spark-flume-kafka-connect-nifi" title="Permalink to this heading">#</a></h4>
</div>
</div>
<div class="section" id="hands-on">
<h3>Hands-on<a class="headerlink" href="#hands-on" title="Permalink to this heading">#</a></h3>
<div class="section" id="aws-sdk-cli">
<h4>AWS SDK (CLI)<a class="headerlink" href="#aws-sdk-cli" title="Permalink to this heading">#</a></h4>
<div class="section" id="stream-management">
<h5>Stream Management<a class="headerlink" href="#stream-management" title="Permalink to this heading">#</a></h5>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws<span class="w"> </span>kinesis<span class="w"> </span>create-stream<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--shard-count<span class="w"> </span><span class="m">1</span><span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--region<span class="w"> </span>eu-west-1
aws<span class="w"> </span>kinesis<span class="w"> </span>list-streams<span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--region<span class="w"> </span>eu-west-1
aws<span class="w"> </span>kinesis<span class="w"> </span>describe-stream<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--region<span class="w"> </span>eu-west-1<span class="w"> </span>--profile<span class="w"> </span>michal
aws<span class="w"> </span>kinesis<span class="w"> </span>update-shard-count<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--target-shard-count<span class="w"> </span><span class="m">2</span><span class="w"> </span>--scaling_type<span class="w"> </span>UNIFORM_SCALING
aws<span class="w"> </span>kinesis<span class="w"> </span>delete-stream<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--region<span class="w"> </span>eu-west-1
</pre></div>
</div>
</div>
<div class="section" id="produce-records">
<h5>Produce records<a class="headerlink" href="#produce-records" title="Permalink to this heading">#</a></h5>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws<span class="w"> </span>kinesis<span class="w"> </span>put-record<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--region<span class="w"> </span>eu-west-1<span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--partition-key<span class="w"> </span>user1<span class="w"> </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;action&quot;: &quot;user signup&quot;}&#39;</span><span class="w"> </span>--cli-binary-format<span class="w"> </span>raw-in-base64-out
aws<span class="w"> </span>kinesis<span class="w"> </span>put-record<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--region<span class="w"> </span>eu-west-1<span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--partition-key<span class="w"> </span>user1<span class="w"> </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;action&quot;: &quot;user login&quot;}&#39;</span><span class="w"> </span>--cli-binary-format<span class="w"> </span>raw-in-base64-out
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws<span class="w"> </span>kinesis<span class="w"> </span>put-records<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--region<span class="w"> </span>eu-west-1<span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--records<span class="w"> </span>file://records.json
</pre></div>
</div>
<p>where records.json has below structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;PartitionKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user signup&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;PartitionKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user login&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;PartitionKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user signup&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws<span class="w"> </span>kinesis<span class="w"> </span>put-record<span class="w"> </span>--stream-name<span class="w"> </span>test_mg<span class="w"> </span>--region<span class="w"> </span>eu-west-1<span class="w"> </span>--profile<span class="w"> </span>michal<span class="w"> </span>--partition-key<span class="w"> </span>user1<span class="w"> </span>--data-binary<span class="w"> </span>fileb://binary-data.bin
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="consumers">
<h2>Consumers<a class="headerlink" href="#consumers" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>data ingested by shards of Kinesis Stream can be retrieved by other application - called Consumer</p></li>
<li><p>consumer can be an application, AWS Lambda (by event), Kinesis Data Firehose or Kinesis Data Analytics</p></li>
<li><p>additionally to record created by producer, consumer see <strong>sequence number</strong> field which describe the position of record within shard</p></li>
<li><p>there are two types of limits for consumers</p>
<ul>
<li><p>2MB/sec per shard for <strong>all</strong> consumers</p></li>
<li><p>2MB/sec per shard <strong>per</strong> consumer - if you enable <strong>enhanced consumer mode</strong></p></li>
</ul>
</li>
</ul>
<p><img alt="img.png" src="../../../_images/img1.png" /></p>
</div>
<div class="section" id="properties-characteristics">
<h2>Properties/characteristics<a class="headerlink" href="#properties-characteristics" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>has <strong>retention</strong>, which can be defined by stream creator - can be from 1 to 365 days</p></li>
<li><p>ability to reprocess data (based on retention mentioned in line above)</p></li>
<li><p>data in stream are <strong>immutable</strong> (cannot be changed)</p></li>
<li><p>records with the same partition key goes to the same shard</p></li>
</ul>
</div>
<div class="section" id="capacity-modes">
<h2>Capacity modes<a class="headerlink" href="#capacity-modes" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>provisioned mode (older)</p>
<ul>
<li><p>you need to manually declare number of shards for created Kinesis Stream</p></li>
<li><p>each shard is limited by AWS limits (shard consumer 1MB/sec or 1000 messages/sec, shard producers 2MB/sec)</p></li>
<li><p>costs are calculated by number of shards provisioned by hour</p></li>
</ul>
</li>
<li><p>on-demand mode (newer)</p>
<ul>
<li><p>capacity is declared automatically</p></li>
<li><p>default capacity = 4MB/s or 4000 records per second per shard</p></li>
<li><p>maximum capacity = 200MB/s and 200000 records per second</p></li>
<li><p>scales automatically based on throughput peak during the last 30 days</p></li>
<li><p>costs are calculated based on number of streams and data transfered in and out of the stream</p></li>
<li><p>if you don’t know size of events</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Kinesis Shards are created within your account and region</p></li>
<li><p>shards can be connected from private subnet using VPC endpoint</p></li>
<li><p>shards can be connected from public subnet using the internet</p></li>
<li><p>transfer of data is encrypted using HTTPS</p></li>
<li><p>data are encrypted at rest using KMS</p></li>
</ul>
</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../00%20Certification/00%20cerfification%20info.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">DAS-C01 certification info</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="01.04%20Kinesis%20Data%20Streams%20-%20consumers.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Consumers</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By https://github.com/michalgromiec<br/>
  
      &copy; Copyright .<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>