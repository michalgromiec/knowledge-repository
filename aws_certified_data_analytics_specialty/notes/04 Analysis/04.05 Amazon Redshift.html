<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>Amazon Redshift - Knowledge Repository 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Knowledge Repository 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Kinesis Data Streams</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../00%20Certification/00%20cerfification%20info.html">DAS-C01 certification info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00%20Certification/01%20training%20case%20study.html">Udemy Course Case Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01%20Collection%20of%20data/01.02%20Kinesis%20Data%20Streams.html">Kinesis Data Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01%20Collection%20of%20data/01.04%20Kinesis%20Data%20Streams%20-%20consumers.html">Consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01%20Collection%20of%20data/01.05%20Kinesis%20Data%20Streams%20Scaling.html">Scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01%20Collection%20of%20data/01.06%20Kinesis%20Data%20Streams%20-%20handling%20duplicates.html">Handling duplicates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01%20Collection%20of%20data/01.07%20Kinesis%20Data%20Streams%20Security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01%20Collection%20of%20data/02.01%20Kinesis%20Data%20Firehose.html">Kinesis Data Firehose</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="amazon-redshift">
<h1>Amazon Redshift<a class="headerlink" href="#amazon-redshift" title="Permalink to this heading">#</a></h1>
<div class="section" id="what-is-it">
<h2>What is it<a class="headerlink" href="#what-is-it" title="Permalink to this heading">#</a></h2>
<p>Fully-managed, petabyte-scale data warehouse.</p>
<ul class="simple">
<li><p>10-times better performance than other Data Warehouses</p>
<ul>
<li><p>massive parallel query execution</p></li>
<li><p>columnar storage</p></li>
</ul>
</li>
<li><p>designed for <strong>OLAP</strong> not OLTP</p></li>
<li><p>cost effective (no upfront costs, pay as you go)</p></li>
<li><p>SQL, ODBC/JDBC interfaces</p></li>
<li><p>scale up or down on demand</p></li>
<li><p>builtin replication &amp; backups</p></li>
<li><p>monitored via Cloudwatch/Cloudtrail</p></li>
<li><p>based on Postgres, expanded by AWS</p></li>
</ul>
</div>
<div class="section" id="use-cases">
<h2>Use cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>accelerate analytics workloads</p></li>
<li><p>unified data warehouse &amp; data lake (by Redshift Spectrum)</p></li>
<li><p>data warehouse modernization</p></li>
<li><p>analyze global sales data, store historical stock trade data</p></li>
<li><p>analyze other data - ad impressions/clicks/gamin data/social trends</p></li>
</ul>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>redshift aggregates all objects into cluster</p></li>
<li><p>cluster contains nodes:</p>
<ul>
<li><p>leader node - managing communication between clients and compute nodes (so clients send requests to leader node only)</p>
<ul>
<li><p>receives client requests</p></li>
<li><p>parses requests</p></li>
<li><p>develops execution plans</p></li>
<li><p>coordinates parallel execution of developed plan</p></li>
<li><p>return results to client</p></li>
</ul>
</li>
<li><p>compute node(s) - one or more</p>
<ul>
<li><p>executing commands/steps received from leader node</p></li>
<li><p>transmitting data between compute nodes to serve queries</p></li>
<li><p>sends intermediate results to leader node</p></li>
<li><p>cluster can contain up to 128 compute nodes and one leader node (so it’s not “infinetely scalable”)</p></li>
<li><p>compute nodes can be one of below types:</p>
<ul>
<li><p>dense storage node = allows for very large warehouses and uses HDDs (low price, lower performance), available two versions with 2TB and 16TB of storage and different number of vCPU and RAM</p></li>
<li><p>dense compute node = allows for very high performance nodes (SSD)</p></li>
</ul>
</li>
<li><p>every compute node is divided into slices</p>
<ul>
<li><p>portion of each node CPU and memory is allocated to each slice</p></li>
<li><p>number of slices per node is determined by node size</p></li>
<li><p>queries executed by node are splitted into slices to have more parallel processing</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="img.png" src="../../../_images/img3.png" /></p>
</div>
<div class="section" id="spectrum">
<h2>Spectrum<a class="headerlink" href="#spectrum" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>allows to query exabytes of unstructured data in S3 without loading</p></li>
<li><p>do the same type of work like Athena does with AWS Glue Datacatalog (so it can be treated as replacement for Presto)</p></li>
<li><p>limitless concurrency</p></li>
<li><p>horizontal scaling</p></li>
<li><p>responsible only for computing (storage is S3)</p></li>
<li><p>wide variety of data formats (avro, csv, orc, text files, tsv, parquet and any other popular opensource formats)</p></li>
<li><p>support for Gzip and Snappy compression</p></li>
</ul>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this heading">#</a></h2>
<p>redshift is fast because of three aspects:</p>
<ul class="simple">
<li><p>massively parallel processing (MPP)</p></li>
<li><p>columnar data storage (splitable)</p></li>
<li><p>column compression (thanks to columnar data storage repeatable data in column need less space)</p></li>
</ul>
</div>
<div class="section" id="durability">
<h2>Durability<a class="headerlink" href="#durability" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>replication within cluster</p></li>
<li><p>data continuously backed up to S3</p></li>
<li><p>in effect data are stored in 3 different places: original, replica and S3</p></li>
<li><p>automatic replace failed drives/nodes</p></li>
<li><p>however - cluster is limited to a single AZ (in november 22 AWS announced multi-az support for cluters which are in AWS preview)</p></li>
</ul>
</div>
<div class="section" id="scaling">
<h2>Scaling<a class="headerlink" href="#scaling" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>supports both vertical and horizontal scaling</p></li>
<li><p>scaling is done in specific way:</p>
<ul>
<li><p>new cluter is created while old one remains available for reads</p></li>
<li><p>CNAME is moved from old to new cluster (which results in few minutes of downtime, done during some sort of maintenance window)</p></li>
<li><p>then redshift move data from old cluster to new cluster in parallel way</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="distribution-styles">
<h2>Distribution Styles<a class="headerlink" href="#distribution-styles" title="Permalink to this heading">#</a></h2>
<p>When data is loaded to table, redshift is distributing data across the compute nodes and slices according to the distribution style defined when creating the table.</p>
<p>The main aim of data distribution is to distribute workload among the nodes and to minimize data movement during query execution.</p>
<p>There are four distribution styles:</p>
<ul class="simple">
<li><p>AUTO - default, based on the size of the table redshift assign optimal distribution for user. If can be EVEN, KEY or ALL</p></li>
<li><p>EVEN - regardless of the record value, all records are divided into nodes and slices evenly (round robin). Best solution when table is not joined with other table or when it’s difficult to decide between KEY and ALL distribution styles.</p></li>
<li><p>KEY - rows distributed based on values of one column, the best when most queries are requested with filter on one column</p></li>
<li><p>ALL - entire table is copied to all nodes. It multiplies storage, insert or updates in tables with this distribution styles lasts longer than other, best solution when table is often joined with other table (because all data are present in current node/slice). Appropriate only for slow moving tables.</p></li>
</ul>
</div>
<div class="section" id="sort-keys">
<h2>Sort Keys<a class="headerlink" href="#sort-keys" title="Permalink to this heading">#</a></h2>
<p>Similar to indexes in RDBS - Redshift stores values of selected field in order, therefore this can reduce number of disk scans when range filtering is required for query.</p>
<p>The best sort key is a field which is often used in WHERE clauses (i.e. when most recent queries are important, it will be helpful when sort key will be a field with timestamp). Also helpful is to define sort key when field is part of joins, but in this case more important is to specify this field as a distribution key.</p>
<p>Types of sort key:</p>
<ul class="simple">
<li><p>single - one field, useful when only one field is used in filtering or joins</p></li>
<li><p>compound - default, <strong>all fields</strong>, order of fields are important (index is build in this way). Performance will be lower when only second field is used in filtering, without the first one.</p></li>
<li><p>interleaved - all fields, of which all are equally important (so fields order is not important)</p></li>
</ul>
</div>
<div class="section" id="data-flows">
<h2>Data Flows<a class="headerlink" href="#data-flows" title="Permalink to this heading">#</a></h2>
<div class="section" id="import-data">
<h3>Import data<a class="headerlink" href="#import-data" title="Permalink to this heading">#</a></h3>
<p>Most efficient method to import data into Redshift table is <code class="docutils literal notranslate"><span class="pre">COPY</span></code> command.</p>
<ul class="simple">
<li><p>parallelized</p></li>
<li><p>can read data from S3, EMR, DynamoDB or remote hosts (using SSH)</p></li>
<li><p>COPY command include table name, source of data (or Manifest file containing sources of data), authorization</p></li>
<li><p>authorization can be IAM role or key-secret (this is included in COPY command)</p></li>
<li><p>COPY can decrypt data as it is loaded from S3</p></li>
<li><p>compression is supported to speed up (gzip, lzop and bzip2)</p></li>
<li><p>automatic compression at target is possible - redshift can decide what is the best option for storing data on cluster</p></li>
<li><p>narrow tables (lots of rows, few columns) should be done by one and only one COPY command (due to overhead of hidden metadata columns which consumes too much space)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">COPY</span></code> is used for importing external data only, in case when user want to import data from other Redshift table he should use <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO...SELECT</span></code> or <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">AS...</span></code> commands</p>
</div>
<div class="section" id="export-data">
<h3>Export data<a class="headerlink" href="#export-data" title="Permalink to this heading">#</a></h3>
<p>Most efficient method is <code class="docutils literal notranslate"><span class="pre">UNLOAD</span></code> command, it allows to unload table to objects stored in S3 bucket.</p>
</div>
<div class="section" id="enhanced-vpc-routing">
<h3>Enhanced VPC routing<a class="headerlink" href="#enhanced-vpc-routing" title="Permalink to this heading">#</a></h3>
<p>By default, all COPY and UNLOAD communication is done using Internet, you can change it to communication through Amazon VPC. In such case, you need to configure VPC correctly.</p>
</div>
<div class="section" id="dblink">
<h3>DBLink<a class="headerlink" href="#dblink" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>allows to connect redshift to PostgreSQL (possibly in AWS RDS)</p></li>
<li><p>solution for copy and sync data between postgresql and redshift</p></li>
</ul>
</div>
</div>
<div class="section" id="integration-with-other-aws-services">
<h2>Integration with other AWS services<a class="headerlink" href="#integration-with-other-aws-services" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>S3 - parallel export from Redshift to multiple data files on S3, import data from S3 using COPY or use S3 objects by using Redshift Spectrum.</p></li>
<li><p>DynamoDB - can import data from dynamodb using <code class="docutils literal notranslate"><span class="pre">COPY</span></code> command</p></li>
<li><p>EMR/EC2 - import data using <code class="docutils literal notranslate"><span class="pre">COPY</span></code> and SSH connection</p></li>
<li><p>Data Pipeline - redhisft tables can be used in data pipelines</p></li>
<li><p>AWS DMS (Database Migration Service) - can migrate database from existing Data Warehouse to Redshift</p></li>
</ul>
</div>
<div class="section" id="workload-management-wlm">
<h2>Workload Management (WLM)<a class="headerlink" href="#workload-management-wlm" title="Permalink to this heading">#</a></h2>
<p>way to help users prioritize workloads</p>
<ul class="simple">
<li><p>prioritize short, fast queries vs long, slow queries (prevent from stucking short queries in queue waiting for long queries)</p></li>
<li><p>uses query queues to achieve this</p></li>
<li><p>you can modify WLM using console, CLI or API</p></li>
</ul>
<div class="section" id="automatic-workload-management">
<h3>Automatic Workload Management<a class="headerlink" href="#automatic-workload-management" title="Permalink to this heading">#</a></h3>
<p>By default, creates up to 8 queues, default 5 queues with even memory allocation.</p>
<p>For large queries concurrency is lowered, for small queries - raised.</p>
<p>Each queue can be configured separately.</p>
</div>
<div class="section" id="manual-workload-management">
<h3>Manual Workload Management<a class="headerlink" href="#manual-workload-management" title="Permalink to this heading">#</a></h3>
<p>Creates one queue with concurrency level of 5 (5 queries at once) and additional superuser queue with concurrency level 1.</p>
<p>You can define up to 8 queues, up to concurrency level 50.</p>
</div>
<div class="section" id="short-query-acceleration-sqa">
<h3>Short Query Acceleration (SQA)<a class="headerlink" href="#short-query-acceleration-sqa" title="Permalink to this heading">#</a></h3>
<p>prioritize short running queries over longer-running once, uses machine learning to predict a query’s execution time.</p>
<p>It’s alternative to WLM.</p>
</div>
</div>
<div class="section" id="vacuum">
<h2>Vacuum<a class="headerlink" href="#vacuum" title="Permalink to this heading">#</a></h2>
<p>Used to recover space from deleted rows and to restore the sort order.</p>
<p>Typs of vacuum:</p>
<ul class="simple">
<li><p>FULL - default, re-sort rows and reclaim space from deleted rows</p></li>
<li><p>DELETE ONLY - like full but without re-sorting rows</p></li>
<li><p>SORT ONLY - like full but without reclaiming space</p></li>
<li><p>REINDEX - used for reinitializing interleaved indexes</p></li>
</ul>
</div>
<div class="section" id="id1">
<h2>Scaling<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<div class="section" id="concurrency-scalling">
<h3>Concurrency scalling<a class="headerlink" href="#concurrency-scalling" title="Permalink to this heading">#</a></h3>
<p>automatically adds cluster capacity to handle increase in concurrent read queries</p>
<p>You can choose which queries take advantage of this feature, as it obviously not cheap.</p>
</div>
<div class="section" id="elastic-resize">
<h3>Elastic resize<a class="headerlink" href="#elastic-resize" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>quickly add or remove nodes of same type</p></li>
<li><p>cluster is unavailable only for few minutes, but tries to keep connections open during the downtime and resume them after capacity is added to cluster</p></li>
<li><p>for some dc2 and ra3 node types you can only double of halve number of instances</p></li>
</ul>
</div>
<div class="section" id="classic-resize">
<h3>Classic resize<a class="headerlink" href="#classic-resize" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>can add nodes of other type</p></li>
<li><p>cluster is read-only for <strong>hours to days</strong></p></li>
</ul>
</div>
<div class="section" id="workaround-snapshot-restore-resize">
<h3>(workaround) Snapshot, restore, resize<a class="headerlink" href="#workaround-snapshot-restore-resize" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>strategy for keeping cluster available during classic resize</p></li>
<li><p>you can do snapshot of old cluster, create a new cluster as you require and restore snapshot to newly created cluster</p></li>
</ul>
</div>
</div>
<div class="section" id="features-introduced-after-2020">
<h2>Features introduced after 2020<a class="headerlink" href="#features-introduced-after-2020" title="Permalink to this heading">#</a></h2>
<div class="section" id="ra3-nodes">
<h3>RA3 nodes<a class="headerlink" href="#ra3-nodes" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>enable independent scaling of compute and storage</p></li>
<li><p>SSD based</p></li>
</ul>
</div>
<div class="section" id="datalake-export">
<h3>Datalake export<a class="headerlink" href="#datalake-export" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>allows for unloading redshift query to S3 in Apache Parquet format</p></li>
</ul>
</div>
<div class="section" id="spatial-data-types">
<h3>Spatial data types<a class="headerlink" href="#spatial-data-types" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>GEOMETRY</p></li>
<li><p>GEOGRAPHY</p></li>
</ul>
</div>
<div class="section" id="cross-region-data-sharing">
<h3>Cross-Region data sharing<a class="headerlink" href="#cross-region-data-sharing" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>share live data across Redshift clu\ters without copying</p></li>
<li><p>requires RA3 node types</p></li>
</ul>
</div>
<div class="section" id="aqua-advanced-query-accelerator">
<h3>AQUA - Advanced Query Accelerator<a class="headerlink" href="#aqua-advanced-query-accelerator" title="Permalink to this heading">#</a></h3>
<p>layer between redshift cluster and S3.</p>
<p>Available only on ra3 nodes.</p>
<p>pushes reduction and aggregation queries closer to the data.</p>
</div>
<div class="section" id="redshift-serverless">
<h3>Redshift Serverless<a class="headerlink" href="#redshift-serverless" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Automatically scaling and provisioning for workload</p></li>
<li><p>pay only when in use, optimizes costs &amp; performance</p></li>
<li><p>uses ML to manage performance</p></li>
<li><p>as it is serverless, starting work with redshift is very easy</p></li>
<li><p>perfect for easy ad-hoc business analysis</p></li>
<li><p>jdbc/odbc connection is available</p></li>
<li><p>capacity measured in Redshift Processing Units (RPU’s)</p>
<ul>
<li><p>costs calculated for RPU-hours (per second) plus storage in GB</p></li>
<li><p>there is base rpu’s, you can adjust it from 32 to 512 RPU’s, by default it’s AUTO</p></li>
<li><p>you can define Max RPU’s</p></li>
</ul>
</li>
</ul>
<div class="section" id="limitations">
<h4>Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>spectrum is not supported</p></li>
<li><p>workload management doesn’t work (obvious as it is serverless)</p></li>
<li><p>maintenance windows - not supported, you dont know when updates will be applied</p></li>
<li><p>no public endpoints (yet) - must access within VPC</p></li>
<li><p>access permissions are granted or revoked as simply as in every postgresql - by <code class="docutils literal notranslate"><span class="pre">GRANT</span></code> or <code class="docutils literal notranslate"><span class="pre">REVOKE</span></code> command</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this heading">#</a></h2>
</div>
<div class="section" id="antipatterns">
<h2>Antipatterns<a class="headerlink" href="#antipatterns" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Small datasets - use RDS instead</p></li>
<li><p>OLTP - use RDS or DynamoDB</p></li>
<li><p>unstructured data - do ETL using EMR first (on the other hand - still can use Spectrum for such data)</p></li>
<li><p>BLOB data (store them in S3 and store only reference in redshift)</p></li>
</ul>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Amazon Redshift</a><ul>
<li><a class="reference internal" href="#what-is-it">What is it</a></li>
<li><a class="reference internal" href="#use-cases">Use cases</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a></li>
<li><a class="reference internal" href="#spectrum">Spectrum</a></li>
<li><a class="reference internal" href="#performance">Performance</a></li>
<li><a class="reference internal" href="#durability">Durability</a></li>
<li><a class="reference internal" href="#scaling">Scaling</a></li>
<li><a class="reference internal" href="#distribution-styles">Distribution Styles</a></li>
<li><a class="reference internal" href="#sort-keys">Sort Keys</a></li>
<li><a class="reference internal" href="#data-flows">Data Flows</a><ul>
<li><a class="reference internal" href="#import-data">Import data</a></li>
<li><a class="reference internal" href="#export-data">Export data</a></li>
<li><a class="reference internal" href="#enhanced-vpc-routing">Enhanced VPC routing</a></li>
<li><a class="reference internal" href="#dblink">DBLink</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration-with-other-aws-services">Integration with other AWS services</a></li>
<li><a class="reference internal" href="#workload-management-wlm">Workload Management (WLM)</a><ul>
<li><a class="reference internal" href="#automatic-workload-management">Automatic Workload Management</a></li>
<li><a class="reference internal" href="#manual-workload-management">Manual Workload Management</a></li>
<li><a class="reference internal" href="#short-query-acceleration-sqa">Short Query Acceleration (SQA)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vacuum">Vacuum</a></li>
<li><a class="reference internal" href="#id1">Scaling</a><ul>
<li><a class="reference internal" href="#concurrency-scalling">Concurrency scalling</a></li>
<li><a class="reference internal" href="#elastic-resize">Elastic resize</a></li>
<li><a class="reference internal" href="#classic-resize">Classic resize</a></li>
<li><a class="reference internal" href="#workaround-snapshot-restore-resize">(workaround) Snapshot, restore, resize</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-introduced-after-2020">Features introduced after 2020</a><ul>
<li><a class="reference internal" href="#ra3-nodes">RA3 nodes</a></li>
<li><a class="reference internal" href="#datalake-export">Datalake export</a></li>
<li><a class="reference internal" href="#spatial-data-types">Spatial data types</a></li>
<li><a class="reference internal" href="#cross-region-data-sharing">Cross-Region data sharing</a></li>
<li><a class="reference internal" href="#aqua-advanced-query-accelerator">AQUA - Advanced Query Accelerator</a></li>
<li><a class="reference internal" href="#redshift-serverless">Redshift Serverless</a><ul>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#security">Security</a></li>
<li><a class="reference internal" href="#antipatterns">Antipatterns</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    </body>
</html>