# Types
## User-Based
selected AWS role can or cannot have permission for S3 bucket or path (using AWS IAM)

## Resource-Based
* bucket policies - created at s3 bucket level, manages permissions for bucket
  * json-based policies
  * can be used to grant public access to the bucket (for all principals, this can't be done using user-based permissions)
  * can be used to cross-account access (all principals from other account)
* object access control list (ACL) - finer grain
* bucket access control list (ACL)

## S3 Access Security waterfall
You have a permission for object if
* the user IAM permisions allow it **OR** the resource policy allows **AND** there is no explicit deny

Or even more specific, below you will find checks in order from the top to the bottom when explicit deny or allow can occur:
* Service Control Policy - at Organization level (account can have denied access to S3 service at all)
* IAM Policy - IAM role can have denied access to S3 or bucket
* Bucket ACL
* Bucket policy
* Object ACL
* Object Policy

Main rules:
* impliit deny is default (meaning if there is no explicit rules, you don't have access to the object)
* explicit allow beats implicit deny (meaning if there is explicit allow but no explicit deny, you have access to the object)
* explicit deny beats explicit allow (meaning if there is any explicit deny, you don't have access to the object)

## Encryption
by default, data are not encrypted at rest. You can enable encryption by purpose:
* Server-side encryption with Amazon S3-managed keys (SSE-S3)
* Server-side encryption with customer-provided keys (SSE-C)
* Server-side encryption with AWS Key Management Service-managed keys (SSE-KMS)

## Block all public access
additional security layer which blocks public access for all objects (meaning only owner and user which directly granted permissions are allowed to see content of object)
by default, all s3 bucket blocks all public access

## VPC Endpoints
you can provide S3 service to private subnets or restrict network traffic to just intra-vpc network space (therefore, all communication with such bucket will be done using AWS network not internet connection).

Such protected data can still be accessed outside VPC using VPN connections.

## CloudTrail logs
All API requests are visible to cloudtrail service

## CloudWatch alarms
You can create cloudwatch alarms based on cloudwatch metrics - for example you can launch lambda function when there is huge amount of requests to S3

## Object lock
prevents objects from being deleted by storing objects using write-once-read-many (WORM) model

## MFA Delete
requires multifactor authentication in case object deletion is required, it is an additional option when object versioning is enabled.